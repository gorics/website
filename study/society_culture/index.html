<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2027 ì‚¬ë¬¸ GOD EDITION (By ë°•ì€ì„±)</title>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Pretendard', 'Noto Sans KR', 'sans-serif'],
                        jua: ['Jua', 'sans-serif'],
                        dohyeon: ['Do Hyeon', 'sans-serif'],
                    },
                    animation: {
                        'spin-slow': 'spin 3s linear infinite',
                        'bounce-slight': 'bounceSlight 2s infinite',
                        'slide-in': 'slideIn 0.4s ease-out forwards',
                        'pop': 'pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)',
                        'pulse-glow': 'pulseGlow 2s infinite',
                    },
                    keyframes: {
                        bounceSlight: {
                            '0%, 100%': { transform: 'translateY(-2%)' },
                            '50%': { transform: 'translateY(0)' },
                        },
                        slideIn: {
                            'from': { opacity: 0, transform: 'translateY(20px)' },
                            'to': { opacity: 1, transform: 'translateY(0)' },
                        },
                        pop: {
                            '0%': { transform: 'scale(0.9)', opacity: 0 },
                            '100%': { transform: 'scale(1)', opacity: 1 },
                        },
                        pulseGlow: {
                            '0%, 100%': { boxShadow: '0 0 10px rgba(99, 102, 241, 0.5)' },
                            '50%': { boxShadow: '0 0 20px rgba(99, 102, 241, 0.8)' },
                        }
                    }
                }
            }
        }
    </script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Do+Hyeon&family=Jua&family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
    
    <style>
        body { -webkit-font-smoothing: antialiased; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        /* ì•”ê¸° ë¹µ(ë¹ˆì¹¸) ìŠ¤íƒ€ì¼ */
        .blind-text { background-color: #3b82f6; color: #3b82f6; border-radius: 4px; cursor: pointer; user-select: none; transition: all 0.2s; padding: 0 4px; font-weight: bold; }
        .dark .blind-text { background-color: #6366f1; color: #6366f1; }
        .blind-text.revealed { background-color: transparent; color: #ef4444; text-decoration: underline; }
        .dark .blind-text.revealed { color: #f87171; }
        
        /* í˜•ê´‘íœ íš¨ê³¼ */
        .highlight-ani {
            background: linear-gradient(120deg, rgba(255,255,0,0) 0%, rgba(255,255,0,0) 100%);
            background-repeat: no-repeat;
            background-size: 100% 40%;
            background-position: 0 88%;
            transition: background 0.5s;
        }
        .highlight-ani:hover {
            background: linear-gradient(120deg, rgba(255, 226, 89, 0.5) 0%, rgba(255, 167, 81, 0.5) 100%);
            background-repeat: no-repeat;
            background-size: 100% 40%;
            background-position: 0 88%;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 transition-colors duration-300 font-sans">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;
        
        // --------------------------------------------------------
        // ğŸ“š ë°ì´í„°ë² ì´ìŠ¤: 2027 ìˆ˜ëŠ¥ ëŒ€ë¹„ ì‹¬í™” (ë°•ì€ì„± Ver.)
        // --------------------------------------------------------
        const societyData = [
            {
                id: 1,
                title: "1. ì‚¬íšŒÂ·ë¬¸í™” í˜„ìƒì˜ íƒêµ¬",
                icon: "microscope",
                color: "from-blue-500 to-cyan-400",
                concepts: [
                    {
                        subTitle: "1) ìì—° í˜„ìƒ vs ì‚¬íšŒÂ·ë¬¸í™” í˜„ìƒ",
                        content: "ìì—° í˜„ìƒì€ ì¸ê°„ì˜ ì˜ì§€ë‚˜ ê°€ì¹˜ì™€ëŠ” ë¬´ê´€í•˜ê²Œ ë°œìƒí•˜ëŠ” 'ëª°ê°€ì¹˜ì„±'ì„ íŠ¹ì§•ìœ¼ë¡œ í•©ë‹ˆë‹¤. ì¸ê³¼ ê´€ê³„ê°€ ë¶„ëª…í•˜ì—¬ ì˜ˆì™¸ê°€ ì—†ëŠ” 'í•„ì—°ì„±(Necessity)'ê³¼ 'ì¡´ì¬ ë²•ì¹™(Sein)'ì„ ë”°ë¦…ë‹ˆë‹¤. ë”°ë¼ì„œ ì‹œê³µê°„ì„ ì´ˆì›”í•œ ê°•í•œ 'ë³´í¸ì„±'ì„ ë±ë‹ˆë‹¤. ë°˜ë©´, ì‚¬íšŒÂ·ë¬¸í™” í˜„ìƒì€ ì¸ê°„ì˜ ì˜ë„ì™€ ê°€ì¹˜ê°€ ê°œì…ëœ 'ê°€ì¹˜ í•¨ì¶•ì„±'ì„ ì§€ë‹™ë‹ˆë‹¤. 'ë§ˆë•…íˆ ê·¸ë˜ì•¼ í•œë‹¤'ëŠ” 'ë‹¹ìœ„ ë²•ì¹™(Sollen)'ê³¼, ëŒ€ê°œ ê·¸ëŸ¬í•˜ë‹¤ëŠ” 'ê°œì—°ì„±(Probability)'ì„ ë”°ë¦…ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ë³´í¸ì„±ê³¼ í•¨ê»˜ ê·¸ ì‚¬íšŒì˜ ë§¥ë½ì— ë”°ë¥¸ 'íŠ¹ìˆ˜ì„±'ì´ ê³µì¡´í•©ë‹ˆë‹¤.",
                        keyPoints: ["ëª°ê°€ì¹˜ì„± vs ê°€ì¹˜í•¨ì¶•ì„±", "ì¡´ì¬ë²•ì¹™(Sein) vs ë‹¹ìœ„ë²•ì¹™(Sollen)", "í•„ì—°ì„±(í™•ì‹¤ì„±) vs ê°œì—°ì„±(í™•ë¥ )", "ë³´í¸ì„± vs ë³´í¸ì„±+íŠ¹ìˆ˜ì„±"]
                    },
                    {
                        subTitle: "2) ì‚¬íšŒÂ·ë¬¸í™” í˜„ìƒì„ ë°”ë¼ë³´ëŠ” ê´€ì ",
                        content: "ê±°ì‹œì  ê´€ì ì€ ì‚¬íšŒ êµ¬ì¡°ì™€ ì œë„ì˜ ì˜í–¥ë ¥ì„ ì¤‘ì‹œí•©ë‹ˆë‹¤. 'ê¸°ëŠ¥ë¡ 'ì€ ì‚¬íšŒë¥¼ ìƒëª…ì²´ì²˜ëŸ¼ ë³´ë©° ê° ë¶€ë¶„ì´ ìƒí˜¸ ì˜ì¡´í•˜ì—¬ ì „ì²´ì˜ ì¡´ì†(ì•ˆì •, í†µí•©)ì— ê¸°ì—¬í•œë‹¤ê³  ë´…ë‹ˆë‹¤. 'ê°ˆë“±ë¡ 'ì€ ì‚¬íšŒë¥¼ ì§€ë°° ì§‘ë‹¨ê³¼ í”¼ì§€ë°° ì§‘ë‹¨ ê°„ì˜ ëŒ€ë¦½ê³¼ íˆ¬ìŸì˜ ì¥ìœ¼ë¡œ ë³´ë©° ê°ˆë“±ì´ ë°œì „ì˜ ì›ë™ë ¥ì´ë¼ê³  ë´…ë‹ˆë‹¤. ë¯¸ì‹œì  ê´€ì ì¸ 'ìƒì§•ì  ìƒí˜¸ ì‘ìš©ë¡ 'ì€ ê°œì¸ ê°„ì˜ ìƒí˜¸ ì‘ìš©ê³¼ ì£¼ê³ ë°›ëŠ” 'ìƒì§•'ì— ë¶€ì—¬í•˜ëŠ” ì£¼ê´€ì  ì˜ë¯¸ í•´ì„ì„ ì¤‘ì‹œí•©ë‹ˆë‹¤(ìƒí™© ì •ì˜).",
                        keyPoints: ["ê¸°ëŠ¥ë¡ (ì¡°í™”/ê· í˜•)", "ê°ˆë“±ë¡ (ì§€ë°°/íˆ¬ìŸ)", "ìƒì§•ì  ìƒí˜¸ì‘ìš©ë¡ (ì˜ë¯¸í•´ì„)", "ì‚¬íšŒ ìœ ê¸°ì²´ì„¤", "ê±°ì‹œ vs ë¯¸ì‹œ"]
                    },
                    {
                        subTitle: "3) ì—°êµ¬ ë°©ë²• (ì–‘ì  vs ì§ˆì )",
                        content: "ì–‘ì  ì—°êµ¬(ì‹¤ì¦ì )ëŠ” ìì—° ê³¼í•™ì˜ ë°©ë²•ì„ ì‚¬íšŒ ê³¼í•™ì— ì ìš©í•˜ëŠ” 'ë°©ë²•ë¡ ì  ì¼ì›ë¡ 'ì„ ì „ì œë¡œ í•©ë‹ˆë‹¤. ê³„ëŸ‰í™”ëœ ìë£Œì™€ í†µê³„ ë¶„ì„ì„ í†µí•´ ì¸ê³¼ ê´€ê³„ë¥¼ íŒŒì•…í•˜ê³  ì¼ë°˜í™”í•˜ëŠ” ê²ƒì´ ëª©ì ì…ë‹ˆë‹¤. 'ê°œë…ì˜ ì¡°ì‘ì  ì •ì˜'ê°€ í•„ìˆ˜ì ì…ë‹ˆë‹¤. ì§ˆì  ì—°êµ¬(í•´ì„ì )ëŠ” ìì—° í˜„ìƒê³¼ ì‚¬íšŒ í˜„ìƒì€ ë‹¤ë¥´ë‹¤ëŠ” 'ë°©ë²•ë¡ ì  ì´ì›ë¡ 'ì„ ì „ì œë¡œ í•©ë‹ˆë‹¤. ì—°êµ¬ìì˜ 'ì§ê´€ì  í†µì°°'ê³¼ 'ê°ì •ì´ì…ì  ì´í•´'ë¥¼ í†µí•´ í–‰ìœ„ìì˜ ì£¼ê´€ì  ë™ê¸°ë¥¼ ì‹¬ì¸µì ìœ¼ë¡œ ì´í•´í•˜ëŠ” ê²ƒì´ ëª©ì ì…ë‹ˆë‹¤.",
                        keyPoints: ["ë°©ë²•ë¡ ì  ì¼ì›ë¡  vs ì´ì›ë¡ ", "ê°œë…ì˜ ì¡°ì‘ì  ì •ì˜(ì–‘ì )", "ì§ê´€ì  í†µì°°/ê°ì •ì´ì…(ì§ˆì )", "ë²•ì¹™ ë°œê²¬ vs ì‹¬ì¸µ ì´í•´"]
                    },
                    {
                        subTitle: "4) ìë£Œ ìˆ˜ì§‘ ë°©ë²•",
                        content: "ì§ˆë¬¸ì§€ë²•: ëŒ€ëŸ‰ ì¡°ì‚¬, í†µê³„ ìš©ì´, ì‹œê°„/ë¹„ìš© ì ˆì•½. ì‹¤í—˜ë²•: ì¸ê³¼ ê´€ê³„ íŒŒì•… ìœ ë¦¬, ë³€ì¸ í†µì œ, ìœ¤ë¦¬ ë¬¸ì œ. ë©´ì ‘ë²•: ì‹¬ì¸µ ì •ë³´, ë¬¸ë§¹ì ê°€ëŠ¥, ë¼í¬ í˜•ì„± ì¤‘ìš”. ì°¸ì—¬ ê´€ì°°ë²•: ìë£Œì˜ ì‹¤ì œì„± ë†’ìŒ, ì˜ì‚¬ì†Œí†µ ê³¤ë€ ëŒ€ìƒ ê°€ëŠ¥. ë¬¸í—Œ ì—°êµ¬ë²•: ê¸°ì¡´ ìë£Œ í™œìš©(2ì°¨ ìë£Œ), ì‹œê³µê°„ ì œì•½ ê·¹ë³µ.",
                        keyPoints: ["ì§ˆë¬¸ì§€(êµ¬ì¡°í™”)", "ì‹¤í—˜(ë³€ì¸í†µì œ)", "ë©´ì ‘(ë¼í¬)", "ì°¸ì—¬ê´€ì°°(ì‹¤ì œì„±)", "ë¬¸í—Œ(2ì°¨ìë£Œ)"]
                    }
                ],
                quiz: [
                    { id: '1-1', type: 'OX', q: "ì‚¬íšŒÂ·ë¬¸í™” í˜„ìƒì€ ì˜ˆì™¸ê°€ ì—†ëŠ” í•„ì—°ì„±ì˜ ë²•ì¹™ì„ ë”°ë¥¸ë‹¤.", a: false, comment: "âŒ ê°œì—°ì„±(í™•ë¥ )ì„ ë”°ë¥´ë©° ì˜ˆì™¸ê°€ ì¡´ì¬í•©ë‹ˆë‹¤." },
                    { id: '1-2', type: 'OX', q: "ê¸°ëŠ¥ë¡ ì€ ì‚¬íšŒì˜ ê° ë¶€ë¶„ì´ ìƒí˜¸ ì˜ì¡´ì ì´ë¼ê³  ë³¸ë‹¤.", a: true, comment: "â­• ì‚¬íšŒ ìœ ê¸°ì²´ì„¤ì— ë”°ë¼ ê° ë¶€ë¶„ì€ ì „ì²´ì˜ ìƒì¡´ì„ ìœ„í•´ ê¸°ëŠ¥í•œë‹¤ê³  ë´…ë‹ˆë‹¤." },
                    { id: '1-3', type: 'choice', q: "ì–‘ì  ì—°êµ¬ì˜ íŠ¹ì§•ìœ¼ë¡œ ì˜³ì§€ ì•Šì€ ê²ƒì€?", options: ["ìˆ˜ì¹˜í™”ëœ ìë£Œ í™œìš©", "ë²•ì¹™ ë°œê²¬ ë° ì¼ë°˜í™”", "ë°©ë²•ë¡ ì  ì´ì›ë¡ ", "ê°œë…ì˜ ì¡°ì‘ì  ì •ì˜"], answer: 2, comment: "ì–‘ì  ì—°êµ¬ëŠ” ë°©ë²•ë¡ ì  'ì¼ì›ë¡ 'ì„ ë”°ë¦…ë‹ˆë‹¤." },
                    { id: '1-4', type: 'choice', q: "ê°€ì¥ ì—„ê²©í•œ ë³€ì¸ í†µì œê°€ ìš”êµ¬ë˜ëŠ” ìë£Œ ìˆ˜ì§‘ ë°©ë²•ì€?", options: ["ë©´ì ‘ë²•", "ì§ˆë¬¸ì§€ë²•", "ì‹¤í—˜ë²•", "ì°¸ì—¬ê´€ì°°ë²•"], answer: 2, comment: "ì‹¤í—˜ë²•ì€ ë…ë¦½ë³€ì¸ ì™¸ì˜ ë³€ì¸ì„ ì² ì €íˆ í†µì œí•´ì•¼ í•©ë‹ˆë‹¤." },
                    { id: '1-5', type: 'choice', q: "ìƒì§•ì  ìƒí˜¸ ì‘ìš©ë¡ ì´ ê°•ì¡°í•˜ëŠ” ê²ƒì€?", options: ["ì‚¬íšŒ êµ¬ì¡°ì˜ êµ¬ì†ì„±", "ê³„ê¸‰ ê°„ì˜ ê°ˆë“±", "ê°œì¸ì˜ ì£¼ê´€ì  ì˜ë¯¸ ë¶€ì—¬", "ì‚¬íšŒ ì œë„ì˜ ê¸°ëŠ¥"], answer: 2, comment: "ê°œì¸ì´ ìƒì§•ì„ í†µí•´ ìƒí™©ì„ ì •ì˜í•˜ê³  ì˜ë¯¸ë¥¼ ë¶€ì—¬í•˜ëŠ” ê³¼ì •ì„ ì¤‘ì‹œí•©ë‹ˆë‹¤." }
                ]
            },
            {
                id: 2,
                title: "2. ê°œì¸ê³¼ ì‚¬íšŒ êµ¬ì¡°",
                icon: "users",
                color: "from-emerald-500 to-teal-400",
                concepts: [
                    {
                        subTitle: "1) ì§€ìœ„ì™€ ì—­í• ",
                        content: "ê·€ì† ì§€ìœ„(ì„ ì²œì ) vs ì„±ì·¨ ì§€ìœ„(í›„ì²œì ). ì—­í• ì€ ì§€ìœ„ì— ëŒ€í•œ ì‚¬íšŒì  ê¸°ëŒ€ì´ë©°, ì‹¤ì œ ìˆ˜í–‰ì€ 'ì—­í•  í–‰ë™'ì…ë‹ˆë‹¤. ë³´ìƒì€ ì—­í•  í–‰ë™ì˜ ê²°ê³¼ì— ëŒ€í•´ ì£¼ì–´ì§‘ë‹ˆë‹¤. ì—­í•  ê°ˆë“±ì€ ì—­í•  ê¸´ì¥(ë‹¨ì¼ ì§€ìœ„ ë‚´ ì¶©ëŒ)ê³¼ ì—­í•  ëª¨ìˆœ(ë³µìˆ˜ ì§€ìœ„ ê°„ ì¶©ëŒ)ì´ ìˆìŠµë‹ˆë‹¤.",
                        keyPoints: ["ê·€ì†/ì„±ì·¨ ì§€ìœ„", "ì—­í•  vs ì—­í•  í–‰ë™", "ì—­í•  ê°ˆë“±"]
                    },
                    {
                        subTitle: "2) ì‚¬íšŒí™” ê¸°ê´€",
                        content: "ê³µì‹ì (ì„¤ë¦½ ëª©ì ì´ ì‚¬íšŒí™”: í•™êµ) vs ë¹„ê³µì‹ì (ë¶€ìˆ˜ì : ê°€ì¡±, íšŒì‚¬). 1ì°¨(ê¸°ì´ˆ, ì¸ê²©: ê°€ì¡±) vs 2ì°¨(ì „ë¬¸, ì§€ì‹: í•™êµ, íšŒì‚¬). *í•™êµëŠ” ê³µì‹ì +2ì°¨, ê°€ì¡±ì€ ë¹„ê³µì‹ì +1ì°¨.",
                        keyPoints: ["ê³µì‹ì /ë¹„ê³µì‹ì ", "1ì°¨/2ì°¨"]
                    },
                    {
                        subTitle: "3) ê°œì¸ê³¼ ì‚¬íšŒì˜ ê´€ê³„",
                        content: "ì‚¬íšŒ ì‹¤ì¬ë¡ (ë’¤ë¥´ì¼): ì‚¬íšŒëŠ” ë…ìì  ì‹¤ì²´(ìœ ê¸°ì²´ì„¤), êµ¬ì¡°ê°€ ê°œì¸ì„ êµ¬ì†í•¨. ì‚¬íšŒ ëª…ëª©ë¡ (ë² ë²„): ì‚¬íšŒëŠ” ì´ë¦„ì¼ ë¿(ê³„ì•½ì„¤), ê°œì¸ì˜ ììœ¨ì„± ì¤‘ì‹œ.",
                        keyPoints: ["ì‚¬íšŒ ì‹¤ì¬ë¡ (êµ¬ì†ì„±)", "ì‚¬íšŒ ëª…ëª©ë¡ (ììœ¨ì„±)"]
                    },
                    {
                        subTitle: "4) ì¼íƒˆ ì´ë¡ ",
                        content: "ì•„ë…¸ë¯¸(ë’¤ë¥´ì¼): ê¸‰ê²©í•œ ë³€ë™, ë¬´ê·œë²”. ì•„ë…¸ë¯¸(ë¨¸íŠ¼): ëª©í‘œì™€ ìˆ˜ë‹¨ì˜ ê´´ë¦¬. ì°¨ë³„ì  êµì œ(í•™ìŠµ): ë‚˜ìœ ì¹œêµ¬ì™€ ì–´ìš¸ë¦¼. ë‚™ì¸ ì´ë¡ : ì‚¬íšŒì  ë°˜ì‘, ë¶€ì •ì  ìì•„, 2ì°¨ ì¼íƒˆ.",
                        keyPoints: ["ë¬´ê·œë²”", "ëª©í‘œ-ìˆ˜ë‹¨ ê´´ë¦¬", "í•™ìŠµ(ì°¨ë³„ì  êµì œ)", "ë‚™ì¸/2ì°¨ ì¼íƒˆ"]
                    },
                    {
                        subTitle: "5) ì‚¬íšŒ ì§‘ë‹¨ê³¼ ì¡°ì§",
                        content: "ê³µë™ ì‚¬íšŒ(ë³¸ì§ˆ ì˜ì§€, ê°€ì¡±) vs ì´ìµ ì‚¬íšŒ(ì„ íƒ ì˜ì§€, íšŒì‚¬). 1ì°¨ ì§‘ë‹¨(ëŒ€ë©´) vs 2ì°¨ ì§‘ë‹¨(ìˆ˜ë‹¨). ë‚´ì§‘ë‹¨(ìš°ë¦¬) vs ì™¸ì§‘ë‹¨(ê·¸ë“¤). ì¤€ê±° ì§‘ë‹¨. ìë°œì  ê²°ì‚¬ì²´(ê°€ì… ììœ , ì¹œëª©/ì‹œë¯¼ë‹¨ì²´). ê´€ë£Œì œ(íš¨ìœ¨ì„±) vs íƒˆê´€ë£Œì œ(ìœ ì—°ì„±).",
                        keyPoints: ["ê³µë™/ì´ìµ ì‚¬íšŒ", "ë‚´/ì™¸ ì§‘ë‹¨", "ìë°œì  ê²°ì‚¬ì²´", "ê´€ë£Œì œ"]
                    }
                ],
                quiz: [
                    { id: '2-1', type: 'OX', q: "í•™êµëŠ” ê³µì‹ì  ì‚¬íšŒí™” ê¸°ê´€ì´ì 1ì°¨ ì‚¬íšŒí™” ê¸°ê´€ì´ë‹¤.", a: false, comment: "âŒ í•™êµëŠ” '2ì°¨' ì‚¬íšŒí™” ê¸°ê´€ì…ë‹ˆë‹¤." },
                    { id: '2-2', type: 'OX', q: "ë‚™ì¸ ì´ë¡ ì€ ì¼íƒˆì˜ ê¸°ì¤€ì´ ìƒëŒ€ì ì´ë¼ê³  ë³¸ë‹¤.", a: true, comment: "â­• ì‚¬íšŒì  ë°˜ì‘(ê·œì •)ì— ë”°ë¼ ì¼íƒˆ ì—¬ë¶€ê°€ ë‹¬ë¼ì§„ë‹¤ê³  ë´…ë‹ˆë‹¤." },
                    { id: '2-3', type: 'choice', q: "ë¨¸íŠ¼ì˜ ì•„ë…¸ë¯¸ ì´ë¡ ì—ì„œ ì¼íƒˆì˜ ì›ì¸ì€?", options: ["ê·œë²”ì˜ ë¶•ê´´", "ì¼íƒˆìì™€ì˜ ì ‘ì´‰", "ëª©í‘œì™€ ìˆ˜ë‹¨ì˜ ë¶ˆì¼ì¹˜", "ë‚™ì¸ìœ¼ë¡œ ì¸í•œ ìì•„ í˜•ì„±"], answer: 2, comment: "ë¬¸í™”ì  ëª©í‘œëŠ” ìˆ˜ìš©í•˜ë‚˜ ì œë„ì  ìˆ˜ë‹¨ì´ ì—†ì„ ë•Œ ë°œìƒí•©ë‹ˆë‹¤." },
                    { id: '2-4', type: 'choice', q: "ìë°œì  ê²°ì‚¬ì²´ì— í•´ë‹¹í•˜ëŠ” ê²ƒì€?", options: ["ê°€ì¡±", "ë˜ë˜ ì§‘ë‹¨", "ì‹œë¯¼ ë‹¨ì²´", "íšŒì‚¬"], answer: 2, comment: "ì‹œë¯¼ ë‹¨ì²´, ë™í˜¸íšŒ, ì´ìµ ì§‘ë‹¨ ë“±ì´ í•´ë‹¹í•©ë‹ˆë‹¤." }
                ]
            },
            {
                id: 3,
                title: "3. ë¬¸í™”ì™€ ì¼ìƒìƒí™œ",
                icon: "palette",
                color: "from-violet-500 to-purple-400",
                concepts: [
                    { subTitle: "1) ë¬¸í™”ì˜ ì†ì„±", content: "ê³µìœ ì„±(ì˜ˆì¸¡ê°€ëŠ¥), í•™ìŠµì„±(í›„ì²œì ), ì¶•ì ì„±(ì „ìŠ¹/ë°œì „), ë³€ë™ì„±(ë³€í™”), ì „ì²´ì„±(ìœ ê¸°ì  ì—°ê´€).", keyPoints: ["ê³µìœ ì„±", "í•™ìŠµì„±", "ì¶•ì ì„±", "ë³€ë™ì„±", "ì „ì²´ì„±"] },
                    { subTitle: "2) ë¬¸í™”ë¥¼ ë³´ëŠ” íƒœë„", content: "ìë¬¸í™” ì¤‘ì‹¬ì£¼ì˜(êµ­ìˆ˜ì£¼ì˜), ë¬¸í™” ì‚¬ëŒ€ì£¼ì˜(ì£¼ì²´ì„± ìƒì‹¤), ë¬¸í™” ìƒëŒ€ì£¼ì˜(ì¡´ì¤‘, ê³µì¡´). ê·¹ë‹¨ì  ìƒëŒ€ì£¼ì˜ëŠ” ê²½ê³„.", keyPoints: ["ìë¬¸í™” ì¤‘ì‹¬ì£¼ì˜", "ë¬¸í™” ì‚¬ëŒ€ì£¼ì˜", "ë¬¸í™” ìƒëŒ€ì£¼ì˜"] },
                    { subTitle: "3) ë¬¸í™” ë³€ë™", content: "ë°œëª…(1ì°¨/2ì°¨), ë°œê²¬, ì „íŒŒ(ì§ì ‘/ê°„ì ‘/ìê·¹). ë¬¸í™” ë™í™”(ì†Œë©¸), ë¬¸í™” ë³‘ì¡´(ê³µì¡´), ë¬¸í™” ìœµí•©(ì œ3ì˜ ë¬¸í™”). ë¬¸í™” ì§€ì²´(ë¬¼ì§ˆ>ë¹„ë¬¼ì§ˆ).", keyPoints: ["ë°œëª…/ë°œê²¬", "ì „íŒŒ", "ë™í™”/ë³‘ì¡´/ìœµí•©", "ë¬¸í™” ì§€ì²´"] }
                ],
                quiz: [
                    { id: '3-1', type: 'OX', q: "ë¬¸í™”ì˜ ê³µìœ ì„±ì€ íƒ€ì¸ì˜ í–‰ë™ì„ ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤.", a: true, comment: "â­• ê³µí†µëœ ìƒí™œ ì–‘ì‹ì„ ê°€ì§€ë¯€ë¡œ ì˜ˆì¸¡ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤." },
                    { id: '3-2', type: 'OX', q: "ìê·¹ ì „íŒŒëŠ” ì•„ì´ë””ì–´ë§Œ ì „íŒŒë˜ì–´ ìƒˆë¡œìš´ ë°œëª…ì´ ì¼ì–´ë‚˜ëŠ” ê²ƒì´ë‹¤.", a: true, comment: "â­• ì˜ˆ: ì´ë‘, êµ¬ê²°." },
                    { id: '3-3', type: 'choice', q: "ë¹„ë¹”ë°¥ ë²„ê±°ëŠ” ì–´ë–¤ ë¬¸í™” ë³€ë™ ì–‘ìƒì¸ê°€?", options: ["ë¬¸í™” ë™í™”", "ë¬¸í™” ë³‘ì¡´", "ë¬¸í™” ìœµí•©", "ë¬¸í™” ì§€ì²´"], answer: 2, comment: "ë‘ ë¬¸í™”ê°€ ì„ì—¬ ìƒˆë¡œìš´ ì œ3ì˜ ë¬¸í™”ê°€ ëœ ìœµí•©ì…ë‹ˆë‹¤." },
                    { id: '3-4', type: 'choice', q: "ë¬¼ì§ˆ ë¬¸í™”ì˜ ë³€ë™ ì†ë„ë¥¼ ë¹„ë¬¼ì§ˆ ë¬¸í™”ê°€ ëª» ë”°ë¼ê°€ëŠ” í˜„ìƒì€?", options: ["ë¬¸í™” ì§€ì²´", "ê¸°ìˆ  ì§€ì²´", "ì•„ë…¸ë¯¸", "ë¬¸í™” ì¶©ê²©"], answer: 0, comment: "ë¬¸í™” ì§€ì²´ í˜„ìƒì…ë‹ˆë‹¤." }
                ]
            },
            {
                id: 4,
                title: "4. ì‚¬íšŒ ë¶ˆí‰ë“± í˜„ìƒ",
                icon: "scale",
                color: "from-orange-500 to-red-400",
                concepts: [
                    { subTitle: "1) ê³„ê¸‰ë¡  vs ê³„ì¸µë¡ ", content: "ê³„ê¸‰ë¡ (ë§ˆë¥´í¬ìŠ¤): ê²½ì œì  ìš”ì¸(ìƒì‚°ìˆ˜ë‹¨) í•˜ë‚˜ë¡œ êµ¬ë¶„. ì´ë¶„ë²•ì (ìœ ì‚°/ë¬´ì‚°), ë¶ˆì—°ì†ì . ê³„ì¸µë¡ (ë² ë²„): ê²½ì œ, ì‚¬íšŒ, ì •ì¹˜ ë“± ë‹¤ì›ì  ìš”ì¸. ì—°ì†ì  ì„œì—´. ì§€ìœ„ ë¶ˆì¼ì¹˜ ì„¤ëª… ê°€ëŠ¥.", keyPoints: ["ì¼ì›ë¡ (ê³„ê¸‰)", "ë‹¤ì›ë¡ (ê³„ì¸µ)", "ì§€ìœ„ ë¶ˆì¼ì¹˜"] },
                    { subTitle: "2) ì‚¬íšŒ ì´ë™ê³¼ ë¹ˆê³¤", content: "ìˆ˜ì§/ìˆ˜í‰, ì„¸ëŒ€ë‚´/ì„¸ëŒ€ê°„, ê°œì¸ì /êµ¬ì¡°ì  ì´ë™. ì ˆëŒ€ì  ë¹ˆê³¤(ìµœì €ìƒê³„ë¹„) vs ìƒëŒ€ì  ë¹ˆê³¤(ì¤‘ìœ„ì†Œë“ 50%). ìš°ë¦¬ë‚˜ë¼ëŠ” ë‘˜ ë‹¤ ê°ê´€ì  ê¸°ì¤€ ì‚¬ìš©.", keyPoints: ["êµ¬ì¡°ì  ì´ë™", "ìƒëŒ€ì  ë¹ˆê³¤(ê°ê´€ì )"] },
                    { subTitle: "3) ì‚¬íšŒ ë³µì§€ ì œë„", content: "ì‚¬íšŒ ë³´í—˜(1ì°¨): ê°•ì œ ê°€ì…, ê¸°ì—¬ê¸ˆ(ëŠ¥ë ¥ë³„), ì˜ˆë°©, ìƒí˜¸ ë¶€ì¡°. ê³µê³µ ë¶€ì¡°(2ì°¨): ë¬´ìƒ ì§€ì›(ì¡°ì„¸), ì²˜ë°©, ì„ ë³„ì , ì¬ë¶„ë°° íš¨ê³¼ í¼.", keyPoints: ["ì‚¬íšŒ ë³´í—˜(ë³´í¸)", "ê³µê³µ ë¶€ì¡°(ì„ ë³„/ë¬´ìƒ)"] }
                ],
                quiz: [
                    { id: '4-1', type: 'OX', q: "ê³„ì¸µë¡ ì€ ì§€ìœ„ ë¶ˆì¼ì¹˜ í˜„ìƒì„ ì„¤ëª…í•˜ê¸°ì— ì í•©í•˜ë‹¤.", a: true, comment: "â­• ë‹¤ì›ì  ê¸°ì¤€ì„ ê°€ì§€ë¯€ë¡œ ì„¤ëª… ê°€ëŠ¥í•©ë‹ˆë‹¤." },
                    { id: '4-2', type: 'OX', q: "ì‚¬íšŒ ë³´í—˜ì€ ì†Œë“ ì¬ë¶„ë°° íš¨ê³¼ê°€ ì—†ë‹¤.", a: false, comment: "âŒ ìˆìŠµë‹ˆë‹¤. ê³ ì†Œë“ìê°€ ë” ë§ì´ ë‚´ê³  í˜œíƒì€ ê³µìœ í•˜ë¯€ë¡œ ì¬ë¶„ë°° íš¨ê³¼ê°€ ìˆìŠµë‹ˆë‹¤ (ê³µê³µë¶€ì¡°ë³´ë‹¤ëŠ” ì‘ìŒ)." },
                    { id: '4-3', type: 'choice', q: "ìš°ë¦¬ë‚˜ë¼ì˜ ìƒëŒ€ì  ë¹ˆê³¤ ê¸°ì¤€ì„ ì€?", options: ["ìµœì € ìƒê³„ë¹„", "ì¤‘ìœ„ ì†Œë“ì˜ 50%", "í‰ê·  ì†Œë“ì˜ 50%", "í•˜ìœ„ 20% ì†Œë“"], answer: 1, comment: "ì¤‘ìœ„ ì†Œë“ì˜ 50% ë¯¸ë§Œì„ ìƒëŒ€ì  ë¹ˆê³¤ìœ¼ë¡œ ë´…ë‹ˆë‹¤." },
                    { id: '4-4', type: 'choice', q: "ê°•ì œ ê°€ì…ì„ ì›ì¹™ìœ¼ë¡œ í•˜ëŠ” ì œë„ëŠ”?", options: ["ê³µê³µ ë¶€ì¡°", "ì‚¬íšŒ ë³´í—˜", "ì‚¬íšŒ ì„œë¹„ìŠ¤", "ìì„  ì‚¬ì—…"], answer: 1, comment: "ì‚¬íšŒ ë³´í—˜(êµ­ë¯¼ì—°ê¸ˆ ë“±)ì€ ê°•ì œ ê°€ì…ì…ë‹ˆë‹¤." }
                ]
            },
            {
                id: 5,
                title: "5. ì‚¬íšŒ ë³€ë™ê³¼ ë¯¸ë˜",
                icon: "rocket",
                color: "from-indigo-500 to-blue-600",
                concepts: [
                    { subTitle: "1) ì‚¬íšŒ ë³€ë™ ì´ë¡ ", content: "ì§„í™”ë¡ : ì¼ì •í•œ ë°©í–¥(ì§„ë³´)ìœ¼ë¡œ ë°œì „. ì„œêµ¬ ì¤‘ì‹¬ì . ìˆœí™˜ë¡ : ìƒì„±-ì„±ì¥-ì‡ í‡´ ë°˜ë³µ. ìš´ëª…ë¡ , ë¯¸ë˜ ì˜ˆì¸¡ ê³¤ë€.", keyPoints: ["ì§„í™”ë¡ (ì§„ë³´)", "ìˆœí™˜ë¡ (ë°˜ë³µ)"] },
                    { subTitle: "2) ê·¼ëŒ€í™”ì™€ ì €ê°œë°œ", content: "ê·¼ëŒ€í™”ë¡ : ë‚´ë¶€ ì›ì¸(ì „í†µ). ì„œêµ¬í™”=ë°œì „. ì¢…ì† ì´ë¡ : ì™¸ë¶€ ì›ì¸(ì°©ì·¨). ì£¼ì²´ì  ë°œì „ ê°•ì¡°.", keyPoints: ["ê·¼ëŒ€í™”ë¡ (ë‚´ë¶€)", "ì¢…ì† ì´ë¡ (ì™¸ë¶€/ì°©ì·¨)"] },
                    { subTitle: "3) ì¸êµ¬ì™€ ì •ë³´ ì‚¬íšŒ", content: "ì €ì¶œì‚° ê³ ë ¹í™”(ë¶€ì–‘ë¹„ ì¦ê°€). ì •ë³´ ì‚¬íšŒ: ë‹¤í’ˆì¢… ì†ŒëŸ‰ ìƒì‚°, íƒˆê´€ë£Œì œ, ì •ë³´ ê²©ì°¨, ì „ì ê°ì‹œ(íŒŒë†‰í‹°ì½˜).", keyPoints: ["ì´ë¶€ì–‘ë¹„", "ì •ë³´ ê²©ì°¨", "íŒŒë†‰í‹°ì½˜"] }
                ],
                quiz: [
                    { id: '5-1', type: 'OX', q: "ìˆœí™˜ë¡ ì€ ì‚¬íšŒê°€ í•­ìƒ ì§„ë³´í•œë‹¤ê³  ë³¸ë‹¤.", a: false, comment: "âŒ ì§„ë³´ì™€ í‡´ë³´ë¥¼ ë°˜ë³µí•œë‹¤ê³  ë´…ë‹ˆë‹¤." },
                    { id: '5-2', type: 'choice', q: "ì¢…ì† ì´ë¡ ì˜ í•µì‹¬ ì£¼ì¥ì€?", options: ["ì „í†µì˜ ê³„ìŠ¹", "ì„ ì§„êµ­ê³¼ì˜ êµë¥˜ í™•ëŒ€", "ì„¸ê³„ ì²´ì œì˜ êµ¬ì¡°ì  ëª¨ìˆœ(ì°©ì·¨)", "ì„œêµ¬í™” ì¶”êµ¬"], answer: 2, comment: "ì¤‘ì‹¬ë¶€(ì„ ì§„êµ­)ê°€ ì£¼ë³€ë¶€(ì €ê°œë°œêµ­)ë¥¼ ì°©ì·¨í•˜ëŠ” êµ¬ì¡°ê°€ ì›ì¸ì´ë¼ê³  ë´…ë‹ˆë‹¤." },
                    { id: '5-3', type: 'choice', q: "ì •ë³´ ì‚¬íšŒì˜ íŠ¹ì§•ì€?", options: ["ì†Œí’ˆì¢… ëŒ€ëŸ‰ ìƒì‚°", "ê´€ë£Œì œ ê°•í™”", "ê°€ì •ê³¼ ì¼í„°ì˜ ë¶„ë¦¬", "ë‹¤í’ˆì¢… ì†ŒëŸ‰ ìƒì‚°"], answer: 3, comment: "ë‹¤ì–‘í•œ ìˆ˜ìš”ì— ë§ì¶˜ ë‹¤í’ˆì¢… ì†ŒëŸ‰ ìƒì‚°ì´ íŠ¹ì§•ì…ë‹ˆë‹¤." }
                ]
            }
        ];

        // --------------------------------------------------------
        // ğŸ› ï¸ ìœ í‹¸ë¦¬í‹° & ì»¤ìŠ¤í…€ í›…
        // --------------------------------------------------------
        const usePersistedState = (key, defaultValue) => {
            const [state, setState] = useState(() => {
                try {
                    const stored = localStorage.getItem(key);
                    return stored ? JSON.parse(stored) : defaultValue;
                } catch { return defaultValue; }
            });
            useEffect(() => {
                localStorage.setItem(key, JSON.stringify(state));
            }, [key, state]);
            return [state, setState];
        };

        const Icon = ({ name, size = 20, className, fill = "none" }) => {
            useEffect(() => { if (window.lucide) window.lucide.createIcons(); });
            return <i data-lucide={name} className={className} fill={fill} style={{ fontSize: size }}></i>;
        };

        // TTS ê¸°ëŠ¥
        const speakText = (text) => {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ko-KR';
                utterance.rate = 1.1;
                window.speechSynthesis.speak(utterance);
            } else {
                alert("ìŒì„± ì§€ì› ë¯¸ì§€ì› ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.");
            }
        };

        // Fisher-Yates Shuffle
        const shuffleArray = (array) => {
            const arr = [...array];
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        };

        // --------------------------------------------------------
        // ğŸš€ ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸
        // --------------------------------------------------------
        const App = () => {
            const [darkMode, setDarkMode] = usePersistedState('god_mode_dark', false);
            const [userData, setUserData] = usePersistedState('god_mode_user_v3', {
                level: 1, xp: 0, wrongAnswers: [], notes: {}, bookmarks: []
            });
            const [currentTab, setCurrentTab] = useState('dashboard');
            const [currentUnitId, setCurrentUnitId] = useState(1);
            const [showConfetti, setShowConfetti] = useState(false);
            const [isSidebarOpen, setIsSidebarOpen] = useState(false); 

            useEffect(() => {
                if (darkMode) document.documentElement.classList.add('dark');
                else document.documentElement.classList.remove('dark');
            }, [darkMode]);

            useEffect(() => {
                const reqXp = userData.level * 300;
                if (userData.xp >= reqXp) {
                    setUserData(p => ({ ...p, level: p.level + 1, xp: p.xp - reqXp }));
                    setShowConfetti(true);
                    setTimeout(() => setShowConfetti(false), 3000);
                }
            }, [userData.xp]);

            const dDay = useMemo(() => {
                const targetDate = new Date('2026-11-19');
                const today = new Date();
                const diff = targetDate - today;
                return Math.ceil(diff / (1000 * 60 * 60 * 24));
            }, []);

            const currentUnit = societyData.find(u => u.id === currentUnitId);

            return (
                <div className="flex h-screen overflow-hidden bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 transition-colors duration-300">
                    {showConfetti && <div className="fixed inset-0 pointer-events-none z-50 flex justify-center items-center"><div className="text-6xl animate-bounce drop-shadow-lg">ğŸ‰ LEVEL UP! ğŸ‰</div></div>}

                    {/* ëª¨ë°”ì¼ í—¤ë” */}
                    <header className="lg:hidden fixed top-0 w-full bg-white/90 dark:bg-gray-800/90 backdrop-blur z-30 px-4 py-3 flex justify-between items-center border-b dark:border-gray-700 shadow-sm">
                        <div className="flex items-center gap-2">
                            <button onClick={() => setIsSidebarOpen(true)} className="p-2 -ml-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700"><Icon name="menu" /></button>
                            <span className="font-dohyeon text-xl bg-clip-text text-transparent bg-gradient-to-r from-indigo-500 to-purple-500">GOD EDITION</span>
                        </div>
                        <div className="text-xs font-bold text-gray-400">By Park Eun-sung</div>
                    </header>

                    {/* ì‚¬ì´ë“œë°” */}
                    <div className={`fixed inset-0 z-40 bg-black/50 backdrop-blur-sm lg:hidden transition-opacity ${isSidebarOpen ? 'opacity-100' : 'opacity-0 pointer-events-none'}`} onClick={() => setIsSidebarOpen(false)}></div>
                    <aside className={`fixed lg:static top-0 left-0 h-full w-72 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col z-50 shadow-2xl transform transition-transform duration-300 ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'}`}>
                        <div className="p-6 flex items-center justify-between border-b border-gray-200 dark:border-gray-700">
                            <div className="flex items-center gap-3">
                                <div className="w-10 h-10 bg-gradient-to-tr from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center text-white font-black text-xl shadow-lg animate-pulse-glow">P</div>
                                <div><h1 className="font-black font-dohyeon text-xl tracking-tight">GOD EDITION</h1><p className="text-[10px] font-bold text-indigo-500 uppercase tracking-widest">Created by Eun-sung</p></div>
                            </div>
                            <button onClick={() => setIsSidebarOpen(false)} className="lg:hidden p-2 text-gray-400"><Icon name="x" /></button>
                        </div>

                        <div className="flex-1 overflow-y-auto p-4 space-y-2 scrollbar-hide">
                            <MenuBtn active={currentTab === 'dashboard'} onClick={() => {setCurrentTab('dashboard'); setIsSidebarOpen(false);}} icon="layout-dashboard" label="ëŒ€ì‹œë³´ë“œ" />
                            <MenuBtn active={currentTab === 'mock_exam'} onClick={() => {setCurrentTab('mock_exam'); setIsSidebarOpen(false);}} icon="file-text" label="ì‹¤ì „ ëª¨ì˜ê³ ì‚¬" isNew />
                            <MenuBtn active={currentTab === 'wrong_note'} onClick={() => {setCurrentTab('wrong_note'); setIsSidebarOpen(false);}} icon="book-x" label="ì˜¤ë‹µ ë…¸íŠ¸" badge={userData.wrongAnswers.length} />
                            <MenuBtn active={currentTab === 'calc_tool'} onClick={() => {setCurrentTab('calc_tool'); setIsSidebarOpen(false);}} icon="calculator" label="ë„í‘œ ë¶„ì„ê¸°" isNew />
                            <MenuBtn active={currentTab === 'pomodoro'} onClick={() => {setCurrentTab('pomodoro'); setIsSidebarOpen(false);}} icon="timer" label="ì§‘ì¤‘ íƒ€ì´ë¨¸" />
                            <MenuBtn active={currentTab === 'bookmarks'} onClick={() => {setCurrentTab('bookmarks'); setIsSidebarOpen(false);}} icon="bookmark" label="ë¶ë§ˆí¬" badge={userData.bookmarks.length} />
                            
                            <div className="my-4 border-t border-gray-200 dark:border-gray-700"></div>
                            <div className="px-2 text-xs font-bold text-gray-400 mb-2 uppercase tracking-wider">Chapter Study</div>
                            
                            {societyData.map(unit => (
                                <button key={unit.id} onClick={() => { setCurrentUnitId(unit.id); setCurrentTab('study'); setIsSidebarOpen(false); }}
                                    className={`w-full text-left p-3 rounded-xl transition-all flex items-center gap-3 group relative overflow-hidden ${currentUnitId === unit.id && currentTab === 'study' ? `bg-gradient-to-r ${unit.color} text-white shadow-lg` : 'hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400'}`}>
                                    <Icon name={unit.icon} className={currentUnitId === unit.id && currentTab === 'study' ? 'text-white' : 'text-gray-400 group-hover:text-indigo-500'} />
                                    <span className="font-bold text-sm truncate">{unit.title}</span>
                                </button>
                            ))}
                        </div>
                        
                        <div className="p-4 border-t border-gray-200 dark:border-gray-700">
                            <button onClick={() => setDarkMode(!darkMode)} className="w-full p-3 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center gap-2 hover:bg-gray-200 dark:hover:bg-gray-600 transition">
                                <Icon name={darkMode ? "sun" : "moon"} size={18} />
                                <span className="font-bold text-sm">{darkMode ? "ë¼ì´íŠ¸ ëª¨ë“œ" : "ë‹¤í¬ ëª¨ë“œ"}</span>
                            </button>
                            <div className="text-center mt-2 text-[10px] text-gray-300 dark:text-gray-600 font-bold">Â© 2026 Park Eun-sung</div>
                        </div>
                    </aside>

                    {/* ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ */}
                    <main className="flex-1 flex flex-col h-screen relative pt-14 lg:pt-0">
                        <header className="hidden lg:flex bg-white/90 dark:bg-gray-800/90 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 p-6 justify-between items-center z-30 sticky top-0 shadow-sm">
                            <div>
                                <h2 className="text-2xl font-black font-dohyeon tracking-tight flex items-center gap-2">
                                    {currentTab === 'dashboard' ? `2027 ìˆ˜ëŠ¥ D-${dDay} ğŸ”¥` : 
                                     currentTab === 'mock_exam' ? 'ì‹¤ì „ ëª¨ì˜ê³ ì‚¬ ğŸ’¯' :
                                     currentTab === 'wrong_note' ? 'ì˜¤ë‹µ ë…¸íŠ¸ ğŸ“' :
                                     currentTab === 'calc_tool' ? 'ë„í‘œ ë¶„ì„ ê³„ì‚°ê¸° ğŸ§®' :
                                     currentTab === 'pomodoro' ? 'ì§‘ì¤‘ íƒ€ì´ë¨¸ â±ï¸' :
                                     currentTab === 'bookmarks' ? 'ë‚˜ë§Œì˜ ë¶ë§ˆí¬ â­' :
                                     currentUnit.title}
                                </h2>
                                <p className="text-xs text-gray-500 font-bold mt-1">Designed by Park Eun-sung | Social Studies & Culture Master Class</p>
                            </div>
                            <div className="flex items-center gap-6">
                                <div className="text-right">
                                    <div className="text-xs font-bold text-gray-400">LV.{userData.level} ì‚¬íƒì „ì‚¬</div>
                                    <div className="w-32 h-2.5 bg-gray-200 dark:bg-gray-700 rounded-full mt-1 overflow-hidden">
                                        <div className="h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-1000" style={{ width: `${(userData.xp % 300) / 3}%` }}></div>
                                    </div>
                                </div>
                            </div>
                        </header>

                        <div className="flex-1 overflow-y-auto p-4 lg:p-8 pb-32 scroll-smooth">
                            <div className="max-w-5xl mx-auto">
                                {currentTab === 'dashboard' && <Dashboard userData={userData} societyData={societyData} dDay={dDay} />}
                                {currentTab === 'study' && <StudyUnit unit={currentUnit} userData={userData} setUserData={setUserData} />}
                                {currentTab === 'mock_exam' && <MockExam societyData={societyData} setUserData={setUserData} />}
                                {currentTab === 'wrong_note' && <WrongNote userData={userData} societyData={societyData} />}
                                {currentTab === 'calc_tool' && <CalcTool />}
                                {currentTab === 'pomodoro' && <PomodoroTimer />}
                                {currentTab === 'bookmarks' && <BookmarkList userData={userData} societyData={societyData} />}
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        // --------------------------------------------------------
        // ğŸ§© ì„œë¸Œ ì»´í¬ë„ŒíŠ¸ë“¤
        // --------------------------------------------------------
        const MenuBtn = ({ active, onClick, icon, label, badge, isNew }) => (
            <button onClick={onClick} className={`w-full p-3 lg:px-4 rounded-xl flex items-center justify-center lg:justify-between transition-all ${active ? 'bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 font-bold' : 'text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700'}`}>
                <div className="flex items-center gap-3"><Icon name={icon} /><span className="lg:block">{label}</span></div>
                <div className="flex gap-2">
                    {isNew && <span className="px-1.5 py-0.5 bg-red-500 text-white text-[10px] rounded font-bold animate-pulse">NEW</span>}
                    {badge > 0 && <span className="flex w-5 h-5 bg-indigo-500 text-white text-xs rounded-full items-center justify-center font-bold">{badge}</span>}
                </div>
            </button>
        );

        const Dashboard = ({ userData, societyData, dDay }) => (
            <div className="space-y-8 animate-slide-in">
                <div className="bg-gradient-to-r from-indigo-600 to-purple-600 rounded-3xl p-8 text-white shadow-xl relative overflow-hidden group">
                    <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10 group-hover:scale-105 transition-transform duration-1000"></div>
                    <div className="relative z-10 flex justify-between items-start">
                        <div>
                            <div className="text-indigo-200 font-bold mb-2">2027í•™ë…„ë„ ëŒ€í•™ìˆ˜í•™ëŠ¥ë ¥ì‹œí—˜</div>
                            <div className="text-5xl md:text-7xl font-black font-jua">D-{dDay}</div>
                            <p className="mt-4 opacity-90 font-medium">"ë°•ì€ì„±ë‹˜ê³¼ í•¨ê»˜ë¼ë©´ 1ë“±ê¸‰ì€ ë‹¹ì—°í•œ ê²°ê³¼ì…ë‹ˆë‹¤."</p>
                        </div>
                        <div className="hidden md:block bg-white/20 p-4 rounded-2xl backdrop-blur-sm text-center">
                            <div className="text-xs font-bold opacity-80">CREATOR</div>
                            <div className="text-xl font-black mt-1">Park Eun-sung</div>
                        </div>
                    </div>
                </div>
                <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
                    <StatBox title="í˜„ì¬ ë ˆë²¨" value={`Lv.${userData.level}`} icon="crown" color="bg-yellow-500" />
                    <StatBox title="ì˜¤ë‹µ ë…¸íŠ¸" value={`${userData.wrongAnswers.length}ê°œ`} icon="alert-circle" color="bg-red-500" />
                    <StatBox title="ë¶ë§ˆí¬" value={`${userData.bookmarks.length}ê°œ`} icon="bookmark" color="bg-blue-500" />
                    <StatBox title="í•™ìŠµ ìƒíƒœ" value="ì—´ê³µì¤‘ ğŸ”¥" icon="zap" color="bg-green-500" />
                </div>
            </div>
        );

        const StatBox = ({ title, value, icon, color }) => (
            <div className="bg-white dark:bg-gray-800 p-5 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 flex flex-col md:flex-row items-center gap-4 hover:-translate-y-1 transition-transform">
                <div className={`w-10 h-10 ${color} rounded-xl flex items-center justify-center text-white shadow-md`}><Icon name={icon} size={20} /></div>
                <div className="text-center md:text-left"><div className="text-xs text-gray-500 dark:text-gray-400 font-bold uppercase">{title}</div><div className="text-lg font-black">{value}</div></div>
            </div>
        );

        const StudyUnit = ({ unit, userData, setUserData }) => {
            const [blindMode, setBlindMode] = useState(false);
            const [localNote, setLocalNote] = useState(userData.notes[unit.id] || "");
            const handleNoteSave = () => { setUserData(prev => ({ ...prev, notes: { ...prev.notes, [unit.id]: localNote } })); alert("ë…¸íŠ¸ ì €ì¥ ì™„ë£Œ! ğŸ’¾"); };
            const toggleBookmark = (conceptIdx) => {
                const bookmarkId = `${unit.id}-${conceptIdx}`;
                setUserData(prev => {
                    const isBookmarked = prev.bookmarks.includes(bookmarkId);
                    return { ...prev, bookmarks: isBookmarked ? prev.bookmarks.filter(id => id !== bookmarkId) : [...prev.bookmarks, bookmarkId] };
                });
            };

            return (
                <div className="space-y-6 animate-slide-in">
                    <div className="sticky top-0 z-20 bg-gray-50/95 dark:bg-gray-900/95 p-3 -mx-4 lg:-mx-8 mb-6 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 flex justify-end">
                        <button onClick={() => setBlindMode(!blindMode)} className={`px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-2 transition-all shadow-sm ${blindMode ? 'bg-indigo-600 text-white' : 'bg-white dark:bg-gray-800 border dark:border-gray-700'}`}>
                            <Icon name={blindMode ? "eye-off" : "eye"} size={18} /> {blindMode ? "ì•”ê¸° ëª¨ë“œ ON" : "ì•”ê¸° ëª¨ë“œ OFF"}
                        </button>
                    </div>
                    {unit.concepts.map((concept, idx) => {
                        const isBookmarked = userData.bookmarks.includes(`${unit.id}-${idx}`);
                        return (
                            <div key={idx} className="bg-white dark:bg-gray-800 rounded-3xl p-6 lg:p-8 shadow-sm border border-gray-100 dark:border-gray-700 relative group hover:shadow-md transition-all">
                                <button onClick={() => toggleBookmark(idx)} className="absolute top-6 right-6 text-gray-300 hover:text-yellow-400 transition"><Icon name="star" fill={isBookmarked ? "gold" : "none"} className={isBookmarked ? "text-yellow-400" : ""} /></button>
                                <h3 className="text-xl lg:text-2xl font-black mb-4 flex items-center gap-3"><span className={`w-8 h-8 rounded-lg bg-gradient-to-br ${unit.color} flex items-center justify-center text-white text-sm font-bold`}>{idx + 1}</span>{concept.subTitle}</h3>
                                <p className="text-base lg:text-lg leading-loose text-gray-600 dark:text-gray-300 mb-6 font-medium break-keep">
                                    {concept.content.split(' ').map((word, i) => {
                                        const isKeyword = unit.concepts[idx].keyPoints.some(kp => word.includes(kp) || kp.includes(word.replace(/[.,()]/g, '')));
                                        if (blindMode && (isKeyword || word.includes('ë²•ì¹™') || word.includes('ë¡ '))) return <span key={i} className="blind-text mx-1" onClick={(e) => e.target.classList.toggle('revealed')}>{word}</span>;
                                        return <span key={i} className={isKeyword ? "highlight-ani mx-0.5 cursor-text" : "mx-0.5"}>{word}</span>;
                                    })}
                                </p>
                                <div className="flex justify-between items-center mt-4">
                                    <div className="flex flex-wrap gap-2">{concept.keyPoints.map((kp, k) => <span key={k} className="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-md text-xs font-bold text-gray-500 dark:text-gray-400">#{kp}</span>)}</div>
                                    <button onClick={() => speakText(concept.content)} className="p-2 text-gray-400 hover:text-indigo-500"><Icon name="volume-2" size={18} /></button>
                                </div>
                            </div>
                        );
                    })}
                    <div className="bg-yellow-50 dark:bg-gray-800 rounded-3xl p-6 border border-yellow-200 dark:border-gray-700 mt-8">
                        <h3 className="font-black mb-2 flex items-center gap-2"><Icon name="pen-tool" size={16} /> MEMO</h3>
                        <textarea value={localNote} onChange={(e) => setLocalNote(e.target.value)} placeholder="í•„ê¸° ê³µê°„..." className="w-full h-32 p-3 rounded-xl bg-white dark:bg-gray-900 border border-yellow-100 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-yellow-400 text-sm"></textarea>
                        <div className="text-right mt-2"><button onClick={handleNoteSave} className="bg-yellow-400 hover:bg-yellow-500 text-white px-4 py-1.5 rounded-lg text-sm font-bold shadow-sm">ì €ì¥</button></div>
                    </div>
                </div>
            );
        };

        const MockExam = ({ societyData, setUserData }) => {
            const [status, setStatus] = useState('intro');
            const [questions, setQuestions] = useState([]);
            const [answers, setAnswers] = useState({});
            const [result, setResult] = useState(null);
            const [timeLeft, setTimeLeft] = useState(1200);

            const startExam = () => {
                const allQuiz = societyData.flatMap(u => u.quiz.map(q => ({ ...q, unitTitle: u.title, unitId: u.id })));
                const shuffled = shuffleArray(allQuiz);
                setQuestions(shuffled.slice(0, 20));
                setAnswers({});
                setStatus('playing');
                setTimeLeft(1200);
            };

            useEffect(() => {
                if (status === 'playing' && timeLeft > 0) {
                    const timer = setInterval(() => setTimeLeft(t => t - 1), 1000);
                    return () => clearInterval(timer);
                } else if (status === 'playing' && timeLeft === 0) submitExam(true);
            }, [status, timeLeft]);

            const submitExam = (force = false) => {
                if (!force && Object.keys(answers).length < questions.length) {
                    if (!confirm(`ì•„ì§ í’€ì§€ ì•Šì€ ë¬¸ì œê°€ ${questions.length - Object.keys(answers).length}ê°œ ìˆìŠµë‹ˆë‹¤. ì œì¶œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) return;
                }
                let score = 0, correctCount = 0, wrongList = [];
                questions.forEach((q, idx) => {
                    const userAns = answers[idx];
                    const correctAns = q.type === 'OX' ? q.a : q.answer;
                    if (userAns === correctAns) { score += 5; correctCount++; }
                    else wrongList.push({ id: q.id, unitId: q.unitId, count: 1 });
                });
                if (wrongList.length > 0) {
                    setUserData(prev => {
                        let updatedWrongs = [...prev.wrongAnswers];
                        wrongList.forEach(w => {
                            const idx = updatedWrongs.findIndex(nw => nw.id === w.id);
                            if (idx > -1) updatedWrongs[idx] = { ...updatedWrongs[idx], count: updatedWrongs[idx].count + 1 };
                            else updatedWrongs.push(w);
                        });
                        return { ...prev, wrongAnswers: updatedWrongs, xp: prev.xp + score };
                    });
                } else { setUserData(prev => ({ ...prev, xp: prev.xp + score })); }
                setResult({ score, correctCount });
                setStatus('result');
                window.scrollTo(0, 0);
            };

            if (status === 'intro') return (
                <div className="flex flex-col items-center justify-center py-20 text-center animate-pop">
                    <div className="w-24 h-24 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mb-6 animate-pulse"><Icon name="file-text" size={48} className="text-red-500" /></div>
                    <h2 className="text-3xl font-black font-dohyeon mb-4">ì‹¤ì „ ëª¨ì˜ê³ ì‚¬ (20ë¬¸í•­)</h2>
                    <p className="text-gray-500 dark:text-gray-400 mb-8 max-w-md">2027 ìˆ˜ëŠ¥ ì™„ë²½ ëŒ€ë¹„!<br/>ë°•ì€ì„± ì„ ìƒë‹˜ì´ ì—„ì„ í•œ ë¬¸ì œë“¤ë¡œ ì‹¤ë ¥ì„ ì ê²€í•˜ì„¸ìš”.<br/>ì œí•œ ì‹œê°„ì€ 20ë¶„ì…ë‹ˆë‹¤.</p>
                    <button onClick={startExam} className="px-10 py-4 bg-red-500 hover:bg-red-600 text-white text-xl font-bold rounded-2xl shadow-xl transition transform hover:scale-105 active:scale-95">ì‹œí—˜ ì‹œì‘í•˜ê¸°</button>
                </div>
            );

            if (status === 'result') return (
                <div className="max-w-3xl mx-auto animate-slide-in pb-20">
                    <div className="text-center py-10 bg-white dark:bg-gray-800 rounded-3xl shadow-lg mb-8 border border-gray-100 dark:border-gray-700">
                        <div className="text-6xl mb-4">{result.score >= 90 ? 'ğŸ†' : 'ğŸ’ª'}</div>
                        <h2 className="text-5xl font-black mb-2 text-indigo-600 dark:text-indigo-400">{result.score}ì </h2>
                        <p className="text-gray-500 dark:text-gray-400 font-bold mb-6">20ë¬¸ì œ ì¤‘ <span className="text-blue-500">{result.correctCount}ê°œ ì •ë‹µ</span> / <span className="text-red-500">{20 - result.correctCount}ê°œ ì˜¤ë‹µ</span></p>
                        <div className="flex justify-center gap-4"><button onClick={startExam} className="px-6 py-3 bg-indigo-500 text-white font-bold rounded-xl hover:bg-indigo-600 transition">ë‹¤ì‹œ ì‘ì‹œí•˜ê¸°</button><button onClick={() => setStatus('intro')} className="px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-bold rounded-xl transition">ë‚˜ê°€ê¸°</button></div>
                    </div>
                    <h3 className="text-2xl font-black font-dohyeon mb-6 pl-2 border-l-4 border-indigo-500">ğŸ“ ë¬¸ì œë³„ ìƒì„¸ ë¶„ì„</h3>
                    <div className="space-y-6">
                        {questions.map((q, idx) => {
                            const userAns = answers[idx];
                            const correctAns = q.type === 'OX' ? q.a : q.answer;
                            const isCorrect = userAns === correctAns;
                            return (
                                <div key={idx} className={`bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border-2 ${isCorrect ? 'border-transparent' : 'border-red-400'}`}>
                                    <div className="flex gap-2 mb-3"><span className={`font-black text-lg ${isCorrect ? 'text-blue-500' : 'text-red-500'}`}>{idx + 1}. {isCorrect ? 'ì •ë‹µ' : 'ì˜¤ë‹µ'}</span><span className="text-xs font-bold bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-gray-500 h-fit mt-1">{q.unitTitle}</span></div>
                                    <h3 className="text-lg font-bold mb-4">{q.q}</h3>
                                    <div className="mb-4 text-sm"><div className="flex gap-4"><span className="font-bold text-gray-500">ë‚´ê°€ ì“´ ë‹µ: <span className={`ml-2 ${isCorrect ? 'text-blue-500' : 'text-red-500'}`}>{userAns === undefined ? 'ë¯¸ì‘ë‹µ' : (q.type === 'OX' ? (userAns ? 'O' : 'X') : userAns + 1)}</span></span><span className="font-bold text-gray-500">ì •ë‹µ: <span className="ml-2 text-blue-500">{q.type === 'OX' ? (correctAns ? 'O' : 'X') : correctAns + 1}</span></span></div></div>
                                    <div className="bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-xl text-sm"><div className="font-bold text-indigo-600 dark:text-indigo-400 mb-1 flex items-center gap-1"><Icon name="check-circle" size={14} /> í•´ì„¤</div><p className="text-gray-700 dark:text-gray-300 leading-relaxed">{q.comment}</p></div>
                                </div>
                            );
                        })}
                    </div>
                </div>
            );

            return (
                <div className="max-w-3xl mx-auto relative">
                    <div className="sticky top-14 lg:top-20 z-30 bg-white/90 dark:bg-gray-900/90 backdrop-blur p-4 flex justify-between items-center mb-6 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700">
                        <div className="flex flex-col"><span className="font-bold text-gray-500 text-xs">ë‚¨ì€ ì‹œê°„</span><span className={`text-xl font-mono font-black ${timeLeft < 60 ? 'text-red-500 animate-pulse' : 'text-gray-800 dark:text-white'}`}>{Math.floor(timeLeft/60)}:{String(timeLeft%60).padStart(2,'0')}</span></div>
                        <div className="flex items-center gap-4"><span className="font-bold text-gray-500 text-sm"><span className="text-indigo-600">{Object.keys(answers).length}</span> / 20 ë¬¸ì œ</span><button onClick={() => submitExam(false)} className="px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg text-sm transition shadow-md">ë‹µì•ˆ ì œì¶œ</button></div>
                    </div>
                    <div className="space-y-8">
                        {questions.map((q, idx) => (
                            <div key={idx} className="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-all">
                                <div className="flex justify-between mb-4"><div className="flex gap-2 items-center"><span className="w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-black text-lg">{idx + 1}</span><span className="text-xs font-bold bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-gray-500">{q.unitTitle}</span></div>{answers[idx] !== undefined && <Icon name="check" className="text-green-500" />}</div>
                                <h3 className="text-lg font-bold mb-6 leading-relaxed text-gray-800 dark:text-gray-100">{q.q}</h3>
                                {q.type === 'OX' ? <div className="flex gap-3">{[true, false].map(opt => <button key={opt.toString()} onClick={() => setAnswers(p => ({...p, [idx]: opt}))} className={`flex-1 py-4 rounded-xl font-black text-xl border-2 transition-all active:scale-95 ${answers[idx] === opt ? 'bg-indigo-500 border-indigo-500 text-white' : 'bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-400'}`}>{opt ? 'O' : 'X'}</button>)}</div> : <div className="space-y-2.5">{q.options.map((opt, i) => <button key={i} onClick={() => setAnswers(p => ({...p, [idx]: i}))} className={`w-full text-left p-4 rounded-xl border-2 transition-all active:scale-[0.99] flex items-center gap-3 ${answers[idx] === i ? 'bg-indigo-50 dark:bg-indigo-900/40 border-indigo-500 text-indigo-700 dark:text-indigo-300' : 'bg-white dark:bg-gray-700 border-gray-100 dark:border-gray-600'}`}><span className={`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold transition-colors ${answers[idx] === i ? 'bg-indigo-500 text-white' : 'bg-gray-200 dark:bg-gray-600 text-gray-500'}`}>{i+1}</span><span className="font-medium">{opt}</span></button>)}</div>}
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const WrongNote = ({ userData, societyData }) => {
            if (userData.wrongAnswers.length === 0) return <div className="text-center py-20 opacity-50"><Icon name="check-circle" size={64} className="mx-auto mb-4" /><p>ì˜¤ë‹µì´ ì—†ìŠµë‹ˆë‹¤. ì™„ë²½í•´ìš”!</p></div>;
            return (
                <div className="grid gap-6 animate-slide-in">
                    {userData.wrongAnswers.map((w, i) => {
                        const unit = societyData.find(u => u.id === w.unitId);
                        const quiz = unit?.quiz.find(q => q.id === w.id);
                        if (!quiz) return null;
                        return (
                            <div key={i} className="bg-white dark:bg-gray-800 rounded-2xl p-6 border-l-8 border-red-400 shadow-sm relative overflow-hidden group">
                                <Icon name="x-circle" size={100} className="absolute -top-4 -right-4 text-red-100 dark:text-red-900/20 group-hover:scale-110 transition" />
                                <div className="relative z-10"><div className="flex justify-between mb-2"><span className="text-xs font-black bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">{unit.title}</span><span className="text-red-500 font-bold text-xs">{w.count}íšŒ ì˜¤ë‹µ</span></div><h3 className="text-lg font-bold mb-3">{quiz.q}</h3><div className="bg-gray-50 dark:bg-gray-900/50 p-4 rounded-xl text-sm"><p className="font-bold text-indigo-500 mb-1">ğŸ’¡ ì •ë‹µ ë° í•´ì„¤</p>{quiz.comment}</div></div>
                            </div>
                        );
                    })}
                </div>
            );
        };

        const CalcTool = () => {
            const [youth, setYouth] = useState('');
            const [working, setWorking] = useState('');
            const [elderly, setElderly] = useState('');
            const [result, setResult] = useState(null);
            const calculate = () => {
                const y = Number(youth), w = Number(working), e = Number(elderly);
                if (!y || !w || !e) { alert("ëª¨ë“  ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!"); return; }
                const dependency = ((y + e) / w) * 100;
                const agingIndex = (e / y) * 100;
                setResult({ dependency: dependency.toFixed(1), agingIndex: agingIndex.toFixed(1) });
            };
            return (
                <div className="max-w-md mx-auto bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl animate-pop">
                    <h3 className="text-2xl font-black mb-6 text-center font-dohyeon">ğŸ“Š ì¸êµ¬ ë¶€ì–‘ë¹„ ê³„ì‚°ê¸°</h3>
                    <div className="space-y-4">
                        <div><label className="text-xs font-bold text-gray-400">ìœ ì†Œë…„ ì¸êµ¬(0-14ì„¸)</label><input type="number" value={youth} onChange={e=>setYouth(e.target.value)} className="w-full p-3 rounded-xl border bg-gray-50 dark:bg-gray-700 dark:border-gray-600" /></div>
                        <div><label className="text-xs font-bold text-gray-400">ë¶€ì–‘ ì¸êµ¬(15-64ì„¸)</label><input type="number" value={working} onChange={e=>setWorking(e.target.value)} className="w-full p-3 rounded-xl border bg-gray-50 dark:bg-gray-700 dark:border-gray-600" /></div>
                        <div><label className="text-xs font-bold text-gray-400">ë…¸ë…„ ì¸êµ¬(65ì„¸+)</label><input type="number" value={elderly} onChange={e=>setElderly(e.target.value)} className="w-full p-3 rounded-xl border bg-gray-50 dark:bg-gray-700 dark:border-gray-600" /></div>
                        <button onClick={calculate} className="w-full py-4 bg-indigo-600 text-white font-bold rounded-xl shadow-lg">ê³„ì‚°í•˜ê¸°</button>
                    </div>
                    {result && <div className="mt-6 p-6 bg-indigo-50 dark:bg-indigo-900/30 rounded-2xl text-center animate-slide-in"><div className="mb-4"><div className="text-sm text-gray-500 dark:text-gray-400">ì´ë¶€ì–‘ë¹„</div><div className="text-3xl font-black text-indigo-600 dark:text-indigo-400">{result.dependency}%</div></div><div><div className="text-sm text-gray-500 dark:text-gray-400">ë…¸ë ¹í™” ì§€ìˆ˜</div><div className="text-3xl font-black text-pink-600 dark:text-pink-400">{result.agingIndex}%</div></div></div>}
                </div>
            );
        };

        const PomodoroTimer = () => {
            const [time, setTime] = useState(1500);
            const [isActive, setIsActive] = useState(false);
            useEffect(() => {
                let interval = null;
                if (isActive && time > 0) interval = setInterval(() => setTime(t => t - 1), 1000);
                else if (time === 0) { setIsActive(false); alert("ì§‘ì¤‘ ì‹œê°„ ì¢…ë£Œ! íœ´ì‹í•˜ì„¸ìš” â˜•"); }
                return () => clearInterval(interval);
            }, [isActive, time]);
            return (
                <div className="text-center py-10 animate-pop">
                    <div className="inline-block p-10 rounded-full border-8 border-indigo-100 dark:border-gray-700 mb-8 relative"><div className="text-6xl lg:text-8xl font-black font-mono tracking-tighter">{Math.floor(time/60)}:{String(time%60).padStart(2,'0')}</div>{isActive && <div className="absolute inset-0 border-8 border-indigo-500 rounded-full animate-spin-slow border-t-transparent border-r-transparent"></div>}</div>
                    <div className="flex justify-center gap-4"><button onClick={() => setIsActive(!isActive)} className={`px-8 py-3 rounded-xl font-bold text-white shadow-lg transition transform active:scale-95 ${isActive ? 'bg-red-500' : 'bg-indigo-500'}`}>{isActive ? 'ì¼ì‹œì •ì§€' : 'ì‹œì‘í•˜ê¸°'}</button><button onClick={() => {setIsActive(false); setTime(1500);}} className="px-8 py-3 rounded-xl font-bold bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300">ë¦¬ì…‹</button></div>
                    <div className="mt-8 flex justify-center gap-2"><button onClick={() => {setIsActive(false); setTime(1500);}} className="text-xs font-bold px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded-full">25ë¶„ (ê³µë¶€)</button><button onClick={() => {setIsActive(false); setTime(300);}} className="text-xs font-bold px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded-full">5ë¶„ (íœ´ì‹)</button></div>
                </div>
            );
        };

        const BookmarkList = ({ userData, societyData }) => {
             if (userData.bookmarks.length === 0) return <div className="text-center py-20 opacity-50"><Icon name="bookmark" size={64} className="mx-auto mb-4" /><p>ë¶ë§ˆí¬í•œ ê°œë…ì´ ì—†ìŠµë‹ˆë‹¤.</p></div>;
             return (
                 <div className="space-y-6 animate-slide-in">
                     {userData.bookmarks.map((bm, i) => {
                         const [uId, cIdx] = bm.split('-');
                         const unit = societyData.find(u => u.id == uId);
                         const concept = unit?.concepts[cIdx];
                         if (!concept) return null;
                         return (
                             <div key={i} className="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-yellow-200 dark:border-yellow-900/30">
                                 <div className="flex justify-between items-center mb-2"><span className="text-xs font-black bg-yellow-100 text-yellow-600 px-2 py-1 rounded">{unit.title}</span><Icon name="star" size={16} fill="gold" className="text-yellow-400" /></div>
                                 <h3 className="text-lg font-bold mb-2">{concept.subTitle}</h3><p className="text-sm text-gray-600 dark:text-gray-300">{concept.content}</p>
                             </div>
                         );
                     })}
                 </div>
             );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
